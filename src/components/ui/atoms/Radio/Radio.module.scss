/* Radio.module.scss */
@use 'sass:map';
@use 'sass:meta';
@use '../../../../styles/mixins' as *;

// radio color
$radio-colors: (
  primary: (
    borderColor: var(--stroke-color-radio),
    bg: var(--bg-color-unchecked-radio),
    fill: var(--primary-checked-color-radio),
    hover: (
      shadow: 0 0 0 rem(4px) var(--primary-hover-shadow-radio),
    ),
    active: (
      shadow: 0 0 0 rem(6px) var(--primary-active-shadow-radio),
    ),
    disabled: (
      bg: var(--disabled-bg-color-radio),
      border: var(--disabled-stroke-color-radio),
    ),
  ),
  secondary: (
    borderColor: var(--stroke-color-radio),
    bg: var(--bg-color-unchecked-radio),
    fill: var(--secondary-checked-color-radio),
    hover: (
      shadow: 0 0 0 rem(4px) var(--secondary-hover-shadow-radio),
    ),
    active: (
      shadow: 0 0 0 rem(6px) var(--secondary-active-shadow-radio),
    ),
    disabled: (
      bg: var(--disabled-bg-color-radio),
      border: var(--disabled-stroke-color-radio),
    ),
  ),
  tertiary: (
    borderColor: var(--stroke-color-radio),
    bg: var(--bg-color-unchecked-radio),
    fill: var(--tertiary-checked-color-radio),
    hover: (
      shadow: 0 0 0 rem(4px) var(--tertiary-hover-shadow-radio),
    ),
    active: (
      shadow: 0 0 0 rem(6px) var(--tertiary-active-shadow-radio),
    ),
    disabled: (
      bg: var(--disabled-bg-color-radio),
      border: var(--disabled-stroke-color-radio),
    ),
  ),
  success: (
    borderColor: var(--stroke-color-radio),
    bg: var(--bg-color-unchecked-radio),
    fill: var(--success-checked-color-radio),
    hover: (
      shadow: 0 0 0 rem(4px) var(--success-hover-shadow-radio),
    ),
    active: (
      shadow: 0 0 0 rem(6px) var(--success-active-shadow-radio),
    ),
    disabled: (
      bg: var(--disabled-bg-color-radio),
      border: var(--disabled-stroke-color-radio),
    ),
  ),
  warning: (
    borderColor: var(--stroke-color-radio),
    bg: var(--bg-color-unchecked-radio),
    fill: var(--warning-checked-color-radio),
    hover: (
      shadow: 0 0 0 rem(4px) var(--warning-hover-shadow-radio),
    ),
    active: (
      shadow: 0 0 0 rem(6px) var(--warning-active-shadow-radio),
    ),
    disabled: (
      bg: var(--disabled-bg-color-radio),
      border: var(--disabled-stroke-color-radio),
    ),
  ),
  danger: (
    borderColor: var(--stroke-color-radio),
    bg: var(--bg-color-unchecked-radio),
    fill: var(--danger-checked-color-radio),
    hover: (
      shadow: 0 0 0 rem(4px) var(--danger-hover-shadow-radio),
    ),
    active: (
      shadow: 0 0 0 rem(6px) var(--danger-active-shadow-radio),
    ),
    disabled: (
      bg: var(--disabled-bg-color-radio),
      border: var(--disabled-stroke-color-radio),
    ),
  ),
);

// radio size
$radio-sizes: (
  xs: (
    size: (
      pc: rem(12px),
      tablet: rem(12px),
      mobile: rem(44px),
    ),
  ),
  sm: (
    size: (
      pc: rem(16px),
      tablet: rem(16px),
      mobile: rem(44px),
    ),
  ),
  md: (
    size: (
      pc: rem(20px),
      tablet: rem(20px),
      mobile: rem(44px),
    ),
  ),
  lg: (
    size: (
      pc: rem(24px),
      tablet: rem(24px),
      mobile: rem(44px),
    ),
  ),
  xl: (
    size: (
      pc: rem(28px),
      tablet: rem(28px),
      mobile: rem(44px),
    ),
  ),
);

// mixin - radio color
@mixin radio-variant($color) {
  $props: map.get($radio-colors, $color);
  $fill: map.get($props, fill);
  $border-color: map.get($props, borderColor);
  $bg: map.get($props, bg);
  $hover-map: map.get($props, hover);
  $active-map: map.get($props, active);

  // shadow
  $hover-shadow: map.get($hover-map, shadow);
  $active-shadow: map.get($active-map, shadow);

  // disabled 색상
  $disabled-props: map.get($props, disabled);
  $disabled-bg: map.get($disabled-props, bg);
  $disabled-border: map.get($disabled-props, border);

  &:global(.color--#{$color}) {
    border: rem(1px) solid $border-color;

    &:has(input:checked) {
      border-color: $fill;
    }

    &:hover {
      box-shadow: $hover-shadow;
    }

    &:active {
      box-shadow: $active-shadow;
    }

    &:has(input:disabled) {
      cursor: not-allowed;
      pointer-events: none;
      user-select: none;
      border-color: $disabled-border;
      background-color: $disabled-bg;
    }

    input:checked + :global(.mark) {
      color: $fill;
      background-color: $bg;
    }

    input:disabled + :global(.mark) {
      color: $disabled-border;
    }
  }
}

// mixin - radio sizes
@mixin radio-size() {
  @each $size-name, $props in $radio-sizes {
    // ──────────────── 기본 데이터 추출 ────────────────
    $size-map: map.get($props, size);

    $size-pc: map.get($size-map, pc);
    $size-tablet: map.get($size-map, tablet);
    $size-mobile: map.get($size-map, mobile);

    // ──────────────── PC 스타일 ────────────────
    &:global(.size--#{$size-name}) {
      width: $size-pc;
      height: $size-pc;
    }

    // ──────────────── Tablet 스타일 (max-width: 768px) ────────────────
    @media (max-width: 768px) {
      &:global(.size--#{$size-name}) {
        width: $size-tablet;
        height: $size-tablet;
      }
    }

    // ──────────────── Mobile 스타일 (max-width: 480px) ────────────────
    @media (max-width: 480px) {
      &:global(.size--#{$size-name}) {
        width: $size-mobile;
        height: $size-mobile;
      }
    }
  }
}

.radio {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  border-radius: var(--project-border-radius-max);
  position: relative;
  background-color: var(--bg-color-unchecked-radio);
  transition: all 0.1s;
  overflow: hidden;
  flex: 0 0 auto;

  // size
  @include radio-size();

  // variant
  @include radio-variant(primary);
  @include radio-variant(secondary);
  @include radio-variant(tertiary);
  @include radio-variant(success);
  @include radio-variant(warning);
  @include radio-variant(danger);

  input[type='radio'] {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;

    &:checked ~ :global(.mark) {
      transform: scale(1);
    }
  }

  :global(.mark) {
    color: transparent;
    transform: scale(0);
    transition: transform 0.15s ease-out;
  }
}
