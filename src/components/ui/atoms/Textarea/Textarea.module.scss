/* Textarea.module.scss */
@use 'sass:map';
@use 'sass:meta';
@use '../../../../styles/mixins' as *;

// Textarea Colors
$textarea-colors: (
  primary: (
    solid: (
      bg: #dceaff,
      color: #0a2540,
      placeholder: #8a9bb0,
    ),
    outline: (
      bg: #ffffff,
      border: #3366cc,
      color: #1a3a66,
      placeholder: #9aaac0,
    ),
    soft: (
      bg: #eef5ff,
      color: #143459,
      placeholder: #a2afc2,
    ),
    ghost: (
      bg: transparent,
      color: #335c99,
      placeholder: #aab6c7,
    ),
  ),
  secondary: (
    solid: (
      bg: #d8edff,
      color: #173a57,
      placeholder: #95a7b8,
    ),
    outline: (
      bg: #ffffff,
      border: #69b2ff,
      color: #1f4b73,
      placeholder: #9db2c4,
    ),
    soft: (
      bg: #eef7ff,
      color: #1d4268,
      placeholder: #a8b8c7,
    ),
    ghost: (
      bg: transparent,
      color: #4f7ea8,
      placeholder: #b4bfca,
    ),
  ),
  tertiary: (
    solid: (
      bg: #e8e8e8,
      color: #1e1e1e,
      placeholder: #9a9a9a,
    ),
    outline: (
      bg: #ffffff,
      border: #4d4d4d,
      color: #252525,
      placeholder: #a4a4a4,
    ),
    soft: (
      bg: #f5f5f5,
      color: #232323,
      placeholder: #ababab,
    ),
    ghost: (
      bg: transparent,
      color: #3a3a3a,
      placeholder: #b2b2b2,
    ),
  ),
  brand: (
    solid: (
      bg: #ffe9e6,
      placeholder: #c7a8a5,
      color: #7a2e25,
    ),
    outline: (
      bg: #ffffff,
      border: #ff6f61,
      placeholder: #b7857f,
      color: #8f3a30,
    ),
    soft: (
      bg: #fff3f1,
      placeholder: #d0bebc,
      color: #8a3a2f,
    ),
    ghost: (
      bg: transparent,
      placeholder: #d9c7c5,
      color: #9a463b,
    ),
  ),
  brand-sub: (
    solid: (
      bg: #f3e9fb,
      placeholder: #c8b7de,
      color: #4b2b70,
    ),
    outline: (
      bg: #ffffff,
      border: #6a1b9a,
      placeholder: #b7a2ce,
      color: #532c7e,
    ),
    soft: (
      bg: #f8f1ff,
      placeholder: #d8caed,
      color: #563482,
    ),
    ghost: (
      bg: transparent,
      placeholder: #e2d5f3,
      color: #64428f,
    ),
  ),
  success: (
    solid: (
      bg: #e2f5e9,
      placeholder: #a9c7b0,
      color: #2e5938,
    ),
    outline: (
      bg: #ffffff,
      border: #28a745,
      placeholder: #94b5a1,
      color: #245c34,
    ),
    soft: (
      bg: #f0faf3,
      placeholder: #c8dbce,
      color: #2f6840,
    ),
    ghost: (
      bg: transparent,
      placeholder: #d4e4d9,
      color: #357347,
    ),
  ),
  warning: (
    solid: (
      bg: #fff4d1,
      placeholder: #c7b98b,
      color: #5c4a00,
    ),
    outline: (
      bg: #ffffff,
      border: #f5c84a,
      placeholder: #cab77c,
      color: #7a6000,
    ),
    soft: (
      bg: #fff9e8,
      placeholder: #d6c796,
      color: #6b5800,
    ),
    ghost: (
      bg: transparent,
      placeholder: #e2d6a1,
      color: #a08200,
    ),
  ),
  danger: (
    solid: (
      bg: #ffe8e8,
      placeholder: #d3b1b1,
      color: #6f1a1a,
    ),
    outline: (
      bg: #ffffff,
      border: #d84a4a,
      placeholder: #c79b9b,
      color: #8a1f1f,
    ),
    soft: (
      bg: #fff2f2,
      placeholder: #d8bebe,
      color: #7a2222,
    ),
    ghost: (
      bg: transparent,
      placeholder: #e5c9c9,
      color: #b43737,
    ),
  ),
);

// textarea sizes
$textarea-sizes: (
  xs: (
    width: rem(360px),
  ),
  sm: (
    width: rem(460px),
  ),
  md: (
    width: rem(520px),
  ),
  lg: (
    width: rem(620px),
  ),
  xl: (
    width: 100%,
  ),
);

// mixin - textarea variant (color)
@mixin textarea-variant($variant) {
  &:global(.variant--#{$variant}) {
    @each $color-name, $props in $textarea-colors {
      $variant-props: map.get($props, $variant);

      @if $variant-props != null {
        &:global(.color--#{$color-name}) {
          @if $variant == 'solid' {
            background-color: map.get($variant-props, bg);

            &:not(:has(textarea:disabled, textarea:read-only)):hover {
              box-shadow: 0 0 0 rem(4px) red;
            }

            :global(textarea) {
              color: map.get($variant-props, color);
              border: none;

              &::placeholder {
                color: map.get($variant-props, placeholder);
              }
            }
          } @else if $variant == 'outline' {
            background-color: map.get($variant-props, bg);
            border: rem(1px) solid map.get($variant-props, border);
            :global(textarea) {
              color: map.get($variant-props, color);

              &::placeholder {
                color: map.get($variant-props, placeholder);
              }
            }
          } @else if $variant == 'ghost' {
            :global(textarea) {
              background-color: map.get($variant-props, bg);
              border: none;
              color: map.get($variant-props, color);

              &::placeholder {
                color: map.get($variant-props, placeholder);
              }
            }
          }

          // disabled
          &:has(textarea:disabled) {
            cursor: not-allowed;
            background-color: #eeeeee;
            border-color: #dddddd;

            :global(textarea) {
              cursor: inherit;
              color: #9e9e9e;

              &::placeholder {
                color: #bdbdbd;
              }
            }
          }

          // readonly
          &:has(textarea:read-only) {
            background-color: #f9f9f9;
            border-color: #e0e0e0;

            :global(textarea) {
              color: #212121;

              &::placeholder {
                color: #757575;
              }
            }
          }
        }
      }
    }
  }
}

// mixin - btn sizes
@mixin textarea-size() {
  @each $size-name, $props in $textarea-sizes {
    $width: map.get($props, width);

    &:global(.size--#{$size-name}) {
      width: $width;
    }
  }
}

.textarea {
  width: 100%;
  display: inline-flex;
  align-items: center;
  flex-direction: column;
  gap: rem(4px);
  padding: rem(10px) rem(14px);
  border-radius: var(--project-border-radius-8);
  transition: all 0.2s ease;

  &:global(.is-max) {
    background-color: red !important;
  }

  :global(textarea) {
    resize: none;
    width: 100%;
    height: 100%;
    outline: none !important;
    word-break: break-all;
    font: var(--project-typo-input1-500);
    background-color: inherit;
  }

  // size
  @include textarea-size();

  @include textarea-variant(solid);
  @include textarea-variant(outline);
  @include textarea-variant(soft);
  @include textarea-variant(ghost);
}

.textarea-counter {
  align-self: end;
  font: var(--project-typo-l3-500);
}
